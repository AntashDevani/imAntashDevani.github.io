import{ads}from"./ads.js";const _={W:window,D:document,H:history,L:localStorage,chrome:navigator.userAgent.indexOf("Chrome"),S:["addEventListener","load","resize","keyup","click","change"],gret:"",BGImage:""};var external_url={google:"https://google.com",google_query:function(){return this.google+"/search?q="}},Nodes={BG:'<div class="bg"></div>',Main:'<div class="main"></div>',header:'<header><div width33 google><div google-logo></div><input name="text" class="search-input" accessKey="g" special/></div><div width33 time><span class="time"></span></div><div width33 control_area><div class="setting" accessKey="s"></div><div accessKey="c" class="cancel hide"></div><div class="bettary"><span class="bettarypercentage"></span></div><div class="theme-switch-wrapper"><label class="theme-switch" for="checkbox"><input type="checkbox" accessKey="a" id="checkbox"/><div class="slider round"></div></label></div></div></header>',main:"<main></main>",briefs:'<div><h1 class="gretting"></h1><h1 class="brief"></h1></div>',setting_from:'<form><div style="margin-left:100px;margin-top 40px;"><br><div><span class="form-tag-color">Name:</span><br><input class="search-input" name="name"></div><br><div><span class="form-tag-color">Country:</span><br><input class="search-input" name="country"></div><br><div><span class="form-tag-color">Company:</span><br><input class="search-input" name="company"></div><br><button id="submit-button" class="button round">Save</button><p style="color:green;" class="hide" id="msg">Successfully Saved !</p></div></form>',footer:'<footer><iframe src="https://imantashdevani.github.io/index_2.html"></iframe></footer>'},able=!0;if(_.L||(document.write('<h1 style="line-height:2;color:red;">localStorage is not Supported</h1>'),able=!1),-1==_.chrome&&(document.write('<h1 style="line-height:2;color:red;">Use Chrome Browser for Better Experince</h1>'),able=!1),able){async function get_bg_image(){return new Promise(async function(e,t){let n=await fetch("https://picsum.photos/"+_.W.innerWidth+"/"+_.W.innerHeight).then(async function(e){return URL.createObjectURL(await e.blob())});_.BGImage=n,e("done")})}function addZero(e){return e<10&&(e="0"+e),e}function getTime(){let e=new Date;return addZero(e.getDate())+"/"+addZero(e.getMonth()+1)+"/"+addZero(e.getFullYear())+" "+addZero(e.getHours())+":"+addZero(e.getMinutes())+":"+addZero(e.getSeconds()+1)}function getBettary(){navigator.getBattery().then(function(e){let t=e.level,n=ads.node(".bettarypercentage")[0],a=addZero(parseInt(100*t)),o=e.charging?a+"^":a;n.innerText=o})}function set_storage(){let e={Xy51:"",Xy5j:"U29sdXRpb25Gb3VuZGVy",Xy5D:"SW5kaWE=",Xy5kbQ:"false",first:1};if(!_.L.getItem("first")){_.L.clear();for(let t in e)_.L.setItem(t,e[t])}}function _gretting(e=!1){let t,n=(new Date).getHours();if(t=n>=5&&n<12?"Good Morning":n>=12&&n<17?"Good Afternoon":n>=17&&n<22?"Good Evening":"Good Night",!_.gret||_.gret!=t||e){_.gret=t;let e=localStorage.getItem("Xy51");ads.node(".gretting")[0].innerText=e?_.gret+", "+atob(e):_.gret}}function _c_c_(e,t){ads.node(".brief")[0].innerText=atob(e)+" - "+atob(t)}function google_search(e){window.open(external_url.google_query()+e)}function search_input(){ads.node("input.search-input")[0][_.S[0]](_.S[3],function(e){let t=this.value;t.trim()&&(e.ctrlKey&&13==e.keyCode?google_search(t):13==e.keyCode&&(-1!==t.indexOf("https://")||-1!==t.indexOf("http://")||-1!==t.indexOf("ftp://")?window.open(t):google_search(t)))})}function ads_main_theme(){ads.add_html("main",Nodes.briefs);let e=_.L.getItem("Xy5j"),t=_.L.getItem("Xy5D");_gretting(!0),_c_c_(e,t)}function ads_open_setting(){ads.add_html("main",Nodes.setting_from)}function add_main_page(){ads.add_html(".main",Nodes.main).then(e=>{"done"==e&&(set_storage(),ads.css("main",["height","calc("+_.W.innerHeight+"px - 160px)"]),ads_main_theme())})}function enable_dark_mode(){let e=localStorage.getItem("Xy5kbQ"),t=ads.node("body");"true"==e?(ads.node("#checkbox")[0].checked=!0,t[0].classList.add("dark")):"false"==e&&(ads.node("#checkbox")[0].checked=!1,t[0].classList.remove("dark"))}function dark_mode(){let e=ads.node("#checkbox");e[0][_.S[0]](_.S[5],()=>{localStorage.getItem("Xy5kbQ");e[0].checked?localStorage.setItem("Xy5kbQ",!0):localStorage.setItem("Xy5kbQ",!1),enable_dark_mode()})}function main(){document.title="ADs - New Tab",ads.add_html(_.D.body,Nodes.BG).then(function(e){if("done"==e){enable_dark_mode();ads.node(".bg");get_bg_image().then(function(e){if("done"==e){ads.css(".bg",["background-image","url("+_.BGImage+")","background-size",_.W.innerWidth+"px "+_.W.innerHeight+"px"]),"true"!==localStorage.getItem("Xy5kbQ")&&ads.node(".bg")[0].classList.add("bg-animate")}})}}),ads.add_html(_.D.body,Nodes.Main),ads.add_html(".main",Nodes.header).then(function(e){"done"==e&&(ads.node(".time")[0].innerText=getTime(),getBettary(),search_input(),ads.node("input.search-input")[0].focus(),ads.node("div[google-logo]")[0].onclick=function(){_.W.open(external_url.google)},dark_mode())}),add_main_page(),ads.add_html(".main",Nodes.footer)}function main_resize(e){var t=_.W.innerHeight-160;t>300&&ads.css("main",["height","calc("+t+"px)"]),ads.css(".bg",["background-size",_.W.innerWidth+"px "+_.W.innerHeight+"px"])}setInterval(()=>{ads.node(".time")[0].innerText=getTime(),getBettary(),_gretting()},1e3),setTimeout(()=>{ads.node(".setting")[0].onclick=function(){ads.addclass(ads.node(this),"hide"),ads.removeclass(ads.node(".cancel"),"hide"),ads.node("main")[0].innerHTML="",ads_open_setting()},ads.node(".cancel")[0].onclick=function(){ads.addclass(ads.node(this),"hide"),ads.removeclass(ads.node(".setting"),"hide"),ads.node("main")[0].innerHTML="",ads_main_theme()}},100),_.D[_.S[0]](_.S[1],main()),_.W.onresize=function(e){main_resize(e)}}